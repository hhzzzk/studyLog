[TOC]



# CG_5_Vertex Processor

카메라 위치에서의 좌표값을 계산함

오브젝트의 좌표계를 카메라를 기준으로 했을 때 어디로 갈지 계산해주는

오브젝트의 좌표값들을 다시 계산해주는..



카메라에 대한 데이터가 gpu에 필요함

정점들이 다 카메라를 기준으로 계산된다.

## 4/10 월요일

vertex processor의 목표는 카메라를 기준으로 물체의 좌표값 다시 계산



## Coordinate System and Coordinate Values

어느 좌표계를 중심으로 해서 오브젝트를 보느냐에 따라 값이 달라짐



## ModelView matrix

결과적으로 카메라를 기준으로 위치한 오브젝트의 좌표값 얻을 수 있음



- 모델 매트리스와 뷰 매트릭스의 합성임
- 뷰 매트릭스는 마지막에 inverse 취함(카메라!시점)
- 모델뷰 매트릭스는 X에 모델 매트릭스 곱하고 뷰매트릭스 역을 곱한거


![image](https://user-images.githubusercontent.com/67236054/233858482-8f4c3a9d-4e09-41bf-b25f-39d9d2e82169.png)




## 1D Case

x의 좌표계는 0 원점이다

월드 좌표계에서는 다름

모델 매트릭스는 __물체를 월드로부터 어딘가로 배치시키는 역할__



####15페이지 1차원에서의 카메라!

카메라를 움직임, V매트릭스 곱함 > 스케일만안되는매트릭스

카메라 : 내위치는0

월드 : 카메라의 위치는  V*X뷰다.

>  카메라도 물체도 오브젝트, 이동가능하다



#### 16페이지 위의 오브젝트와 카메라를 같이보자

둘다월드좌표계로 바꿈

최종적으로 카메라에서 어떻게 보이는가 = X뷰 를  구해야함

나머지 매트릭스 넘김

좌표계 변환, 곱한 매트릭스가 모델뷰매트릭스

![image](https://user-images.githubusercontent.com/67236054/233858772-6df60955-4923-4079-b0aa-6382735aa9b7.png)



수식의 의미 알기, X뷰 = V-1MX오브젝트

의미가 그래서 뭐냐

```
카메라 좌표계에서 측정한 오브젝트의 위치
세계좌표계와는 별개의
```



카메라를 원점으로 좌표계를 변환해서 계산한다.



20페이지

## 3D Case

똑같다

수식 계산하면 월드좌표계는 날라간다. 월드좌표계는 계산할때 쓰고..

---

## Projection matrix

24페이지

여기까지 하면 카메라로 좌표계 변환까지 함

이제 카메라로 찍을 차례 - 프로젝션 매트릭스, >>>캐노니컬뷰로 바꾸자!!!



모든 데이터가 카메라를 원점으로 좌표게 변환됨



canonical view, 표준적인 뷰 볼륨으로 변환시키자 > 무엇이든 캐노니컬뷰볼륨으로 바꾸기 가능

어떤 뷰라도 -1과 1사이의 정육면체에 갇힌 공간으로 변환

 linear transformation이 가능하다

이게 매트릭스 P임

![image](https://user-images.githubusercontent.com/67236054/233867147-18ad7a70-a4bd-401c-a207-013fc5104dc6.png)



25페이지 외울필요없음..함수잘쓰기

프로젝션이 행렬로 표현된다만 알기



>  어떤 뷰 볼륨도 캐노니컬뷰볼륨으로 바뀐다.



P매트릭스가 캐노니컬로 변환시킴

3차원 사다리꼴 같은게 사실은 선들이 평행하지 않은데 클립으로 가면서 평행해짐

카메라는 클립 밖의 어딘가 저멀리로 가버림

> 오브젝트가 사라진게 아니라 클립에서 정육면체를 벗어나서 어딘가에 존재.
>
> 좌표를 해석하는 방식이 달라짐

26페이지

## Perspective Projection

행렬 p를 만든다

glm은 각도계산을 라디언으로 함. 값 넣을때 변환과정 필요



## Viewport

28페이지



캐노니컬을 모니터의 어디에 위치시킬 것인가

W 매트릭스, 뷰포트 행렬은 스크린으로 좌표계를 바꾸기

X,Y,Z 증감 방향 바뀜

스크린 안으로 들어갈수록 depth 에 따라 z가 양으로 증가

depth는 0-1 범위

![image](https://user-images.githubusercontent.com/67236054/233867238-76bd6e56-ebf1-430f-96db-ca4f5955f09d.png)



## Relationship between Aspect Ratio & Viewport



? 

## Recap:









